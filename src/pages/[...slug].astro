---
import { type CollectionEntry, getCollection } from 'astro:content';
import BlogPost from '../layouts/BlogPost.astro';
import { getNotes } from '../components/Notes.astro';
import type { MarkdownInstance } from "astro";

export async function getStaticPaths() {
	return getNotes();
}

type Props = MarkdownInstance<Record<string, any>>;
const post = Astro.props;
const { Content } = post;

// quick hack to get the pubDate into the BlogPost layout
const pubDate = post.frontmatter.pubDate ? new Date(post.frontmatter.pubDate) : null;

console.log('\n\nSLUG', post.frontmatter, pubDate, '\n\n')
// TODO:
// * [ ] Read all notes with long slugs
// * [ ] Assign layout based on note type
// * [ ] Determine pubDate based on note type
---

{(pubDate &&
<BlogPost {...post} pubDate={pubDate}>
  <Content />
</BlogPost>
)}